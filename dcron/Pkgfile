# Description: Multi-user cron daemon
# URL:         https://github.com/ptchinster/dcron
# Depends on:  run-parts

# Maintainer notes on dependencies:
#   run-parts: defined in /etc/crontab as jobs executioner

name=dcron
version=4.6
release=2
source="https://github.com/ptchinster/dcron/archive/refs/tags/v$version/$name-$version.tar.gz
	crontab
	rc.crond"

build() {
	cd $name-$version

	make PREFIX=/usr
	make DESTDIR=$PKG CRONTAB_GROUP=users install

	install -m 0600 $SRC/crontab $PKG/var/spool/cron/crontabs/root
	ln -s ../var/spool/cron/crontabs/root $PKG/etc/crontab

	install -m 0755 -D $SRC/rc.crond $PKG/etc/rc.d/crond

	for d in hourly daily weekly monthly; do
		mkdir -p $PKG/etc/cron/$d
	done
}
